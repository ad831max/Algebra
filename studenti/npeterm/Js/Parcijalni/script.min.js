const dataUserTemplate=document.querySelector("[data-user-template]"),dataUserContainer=document.querySelector("[data-user-container]"),dataSearch=document.querySelector("[data-search]"),loader=document.querySelector("[data-loader]"),eror1=document.getElementById("eror1"),eror2=document.getElementById("eror2"),eror3=document.getElementById("eror3");let SMT=[];function HL(){loader.style.display="none"}function SL(){loader.style.display="block"}async function searching(input){if(SL(),HE1(),HE2(),HE3(),""===input)return SE1(),void HL();try{let songs=await fetching(input);0===songs.resultCount?SE2():(display(songs),HL())}catch(error){console.log(error),SE3()}}async function fetching(input){try{const response=await fetch(`https://itunes.apple.com/search?term=${input}&entity=song`),data=await response.json();let songs;return data.results}catch(error){console.log(error)}}function display(songs){SMT=songs.map(song=>{const clone=dataUserTemplate.content.cloneNode(!0).children[0],SN=clone.querySelector("[data-song]"),AN=clone.querySelector("[data-artist]"),AL=clone.querySelector("[data-album]"),AT=clone.querySelector("[data-art]"),SP=clone.querySelector("[data-preview]");return SN.textContent=song.trackName,AN.textContent=song.artistName,AL.textContent=song.collectionName,SP.src=song.previewUrl,AT.src=song.artworkUrl100,console.log(SP),dataUserContainer.append(clone),{SN:song.trackName,AN:song.artistName,AL:song.collectionName,AT:song.previewUrl,SP:song.artworkUrl100,element:clone}})}function SE1(){eror1.style.display="block"}function SE2(){eror2.style.display="block"}function SE3(){eror3.style.display="block"}function HE1(){eror1.style.display="none"}function HE2(){eror2.style.display="none"}function HE3(){eror3.style.display="none"}dataSearch.addEventListener("input",e=>{const input=e.target.value.toLowerCase();dataUserContainer.innerHTML="",searching(input)});